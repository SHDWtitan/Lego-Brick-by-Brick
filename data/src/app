from flask import Flask, render_template
import altair as alt
from vega_datasets import data

app = Flask(__name__)

@app.route("/")
def index():
    cars = data.cars()
    chart = alt.Chart(cars).mark_point().encode(
        x='Horsepower',
        y='Miles_per_Gallon',
        color='Origin'
    ).to_json()  # convert to VegaLite JSON
    return render_template("index.html", chart=chart)

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=8080, debug=True)